# Environment Configuration for SEO Optimization System

# Mercado Livre API Configuration
# To obtain API credentials, visit: https://developers.mercadolivre.com.br/
# A aplicação lê estas chaves via config/app.php (mercadolivre.*)
ML_APP_ID=your_mercadolibre_app_id
ML_CLIENT_SECRET=your_mercadolibre_client_secret
ML_REDIRECT_URI=https://your-domain.com/dashboard

# Token "global" opcional (modo simples). No modo multi-conta, tokens ficam em ml_accounts.
ML_ACCESS_TOKEN=your_mercadolibre_access_token
ML_REFRESH_TOKEN=your_mercadolibre_refresh_token

# (Compatibilidade) legado: algumas documentações antigas citam ML_CLIENT_ID
ML_CLIENT_ID=your_mercadolibre_app_id

# Chave para criptografia de tokens e dados sensíveis (mínimo 32 caracteres)
APP_KEY=change_me_with_32+_chars_minimum________________

# AI Service Configuration (OpenAI)
# To obtain API key, visit: https://platform.openai.com/
AI_API_KEY=your_openai_api_key
AI_PROVIDER=openai  # Options: openai, anthropic (for Claude), azure-openai

# Database Configuration
DB_HOST=localhost
DB_PORT=3306
DB_NAME=seo_optimizer_db
DB_USER=seo_user
DB_PASS=secure_password

# Application Configuration
APP_ENV=production  # Options: local, staging, production
APP_DEBUG=false
APP_URL=https://your-domain.com

# Mobile API Token Secret (min 32 chars, REQUIRED for mobile auth)
MOBILE_TOKEN_SECRET=

# HTTPS (forçar redirect HTTP→HTTPS em produção)
FORCE_HTTPS=true

# Cache Configuration
CACHE_DRIVER=file  # Options: file, redis, memcached
CACHE_TTL=3600  # Cache time-to-live in seconds

# Redis Configuration (recomendado para produção)
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=null
REDIS_DB=0

# Logging Configuration
LOG_CHANNEL=stack
LOG_LEVEL=warning

# Queue Configuration (for background jobs)
# IMPORTANTE: Use 'database' ou 'redis' em produção!
# 'sync' executa jobs durante o request HTTP, bloqueando a resposta.
QUEUE_CONNECTION=database  # Options: sync, database, redis, sqs

# Rate Limiting
API_RATE_LIMIT=100    # Requests per minute to external APIs
API_BURST_LIMIT=10    # Burst limit for rapid requests
# ============================================================================
# Auth Failure Monitor Configuration
# ============================================================================
AUTH_BLOCK_THRESHOLD=10
AUTH_FAILURE_ALERT_THRESHOLD=50
AUTH_BLOCK_DURATION=3600
AUTH_TIME_WINDOW=3600
AUTH_IP_WHITELIST=127.0.0.1,::1

# Email Configuration (if not already set)
ADMIN_EMAIL=admin@example.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_SECURE=tls
EMAIL_ENABLED=false
EMAIL_FROM=noreply@your-domain.com
EMAIL_REPLY_TO=suporte@your-domain.com
ALERT_EMAIL_RECIPIENT=admin@your-domain.com

# ============================================================================
# Telegram Notifications
# ============================================================================
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ============================================================================
# Webhook Alerts (Slack, Discord, etc.)
# ============================================================================
ALERT_WEBHOOK_URL=

# ============================================================================
# Brevo (Sendinblue) Integration
# ============================================================================
BREVO_API_KEY=
BREVO_TEST_EMAIL=

# ============================================================================
# AI Service Configuration (multi-provider)
# ============================================================================
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
GEMINI_API_KEY=
AI_DEFAULT_PROVIDER=openai
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=2000
TECH_SHEET_AI_ENABLED=false

# ============================================================================
# AWS Configuration (S3 Backups)
# ============================================================================
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_BUCKET=

# ============================================================================
# Backup Configuration
# ============================================================================
BACKUP_REMOTE_TYPE=local
BACKUP_REMOTE_NAME=
BACKUP_REMOTE_PATH=

# ============================================================================
# ML Proxy Configuration (optional — reverse proxy for API calls)
# ============================================================================
ML_PROXY_ENABLED=false
ML_PROXY_HOST=
ML_PROXY_PORT=
ML_PROXY_USER=
ML_PROXY_PASS=
ML_PROXY_TYPE=http

# ============================================================================
# Auth Monitor Logging
# ============================================================================
AUTH_LOG_DIR=storage/logs

# ============================================================================
# Mercado Livre Advanced
# ============================================================================
ML_ALLOW_LOCAL_CACHE_FALLBACK=false
ML_SITE_ID=MLB
ML_WEBHOOK_SECRET=
ML_ALLOW_NETWORK=true
ML_ENABLED=true
ML_API_RATE_DELAY_MS=200
ML_LEARNING_RATE=0.1

# ============================================================================
# Mercado Pago
# ============================================================================
MERCADO_PAGO_ENABLED=false
MP_WEBHOOK_SECRET=
MERCADOPAGO_WEBHOOK_SECRET=

# ============================================================================
# Database Aliases (código aceita ambas as variantes)
# ============================================================================
# DB_DATABASE=seo_optimizer_db      # alias de DB_NAME
# DB_USERNAME=seo_user              # alias de DB_USER
# DB_PASSWORD=secure_password       # alias de DB_PASS

# ============================================================================
# SMTP Aliases (código aceita ambas as variantes)
# ============================================================================
# SMTP_USERNAME=                    # alias de SMTP_USER
# SMTP_PASSWORD=                    # alias de SMTP_PASS
# SMTP_ENCRYPTION=tls               # alias de SMTP_SECURE
SMTP_FROM_EMAIL=noreply@your-domain.com
SMTP_FROM_NAME=Mercado Livre Manager
SMTP_ENABLED=false

# ============================================================================
# Push Notifications (VAPID)
# ============================================================================
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:admin@your-domain.com

# ============================================================================
# AI / LLM Multi-Provider Configuration
# ============================================================================
AI_PREFERRED_PROVIDER=openai
AI_FALLBACK_ENABLED=true
AI_DEFAULT_MODEL=gpt-4o-mini
AI_CACHE_ENABLED=true
OPENAI_API_BASE_URL=https://api.openai.com/v1
APP_SECRET=
ENCRYPTION_SALT=
REMOVE_BG_API_KEY=

# ============================================================================
# Logging Advanced
# ============================================================================
LOG_PATH=storage/logs
LOG_FILE=storage/logs/app.log
LOG_MAX_FILE_SIZE=10485760
LOG_RETENTION_DAYS=30
LOG_ROTATION_ENABLED=true
LOG_DATABASE_ENABLED=false
LOG_REALTIME_ALERTS=false

# ============================================================================
# Token Refresh
# ============================================================================
TOKEN_REFRESH_MARGIN_MINUTES=30
TOKEN_REFRESH_MAX_RETRIES=3

# ============================================================================
# Polling & Monitoring
# ============================================================================
POLLING_ENABLED=true
POLLING_INTERVAL_MINUTES=30
MONITORING_ENABLED=true
MONITORING_INTERVAL_MINUTES=5

# ============================================================================
# Decision Engine / Predictive Analytics
# ============================================================================
DECISION_CONFIDENCE_THRESHOLD=0.7
MAX_PRICE_CHANGE_PERCENT=15
MODEL_RETRAIN_INTERVAL=86400
PREDICTION_HORIZON_DAYS=30
MIN_DATA_POINTS=30
PREDICTION_CONFIDENCE_THRESHOLD=0.6
CACHE_PREDICTIONS_TTL=3600
ENABLE_SEASONALITY=true
TREND_SMOOTHING_FACTOR=0.3

# ============================================================================
# Rate Limiting (Security Middleware)
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60

# Advanced Security - Hardenings 2026-02-15
# SECURITY_MW_RATE_LIMIT_ENABLED: Enable internal rate limit in SecurityMiddleware
#   Default: false (use RateLimitMiddleware in index.php as single source)
#   Set to 'true' only if you need dual-layer rate limiting
SECURITY_MW_RATE_LIMIT_ENABLED=false

# SECURITY_HEADERS_LEGACY_ENABLED: Enable legacy SecurityHeadersMiddleware
#   Default: false (use SecurityMiddleware as single source to avoid drift)
#   Set to 'true' only for backward compatibility if needed
SECURITY_HEADERS_LEGACY_ENABLED=false

# ============================================================================
# Alert Configuration
# ============================================================================
ALERT_FROM_EMAIL=alerts@your-domain.com
ALERT_FROM_NAME=Alert System
ALERT_TO_EMAILS=admin@your-domain.com
ALERT_COOLDOWN_MINUTES=60
ALERT_EMAILS=admin@your-domain.com
ALERT_EMAIL=admin@your-domain.com
MAILGUN_API_KEY=

# ============================================================================
# Application Extras
# ============================================================================
APP_NAME=Mercado Livre Manager
APP_TIMEZONE=America/Sao_Paulo
APP_DOMAIN=your-domain.com
APP_SECRET=
MOBILE_TOKEN_TTL=86400

# ============================================================================
# Tech Sheet Feature Flags
# ============================================================================
TECH_SHEET_ENABLED=true
TECH_SHEET_BENCHMARK_ENABLED=true
TECH_SHEET_AUTO_APPLY=false
TECH_SHEET_MIN_CONFIDENCE_AUTO=90
TECH_SHEET_BATCH_LIMIT=200
TECH_SHEET_SUMMARY_TTL_HOURS=12
TECH_SHEET_BENCHMARK_MAX_COMPETITORS=10
TECH_SHEET_BENCHMARK_CACHE_TTL=3600

# ============================================================================
# EAN Controller (Circuit Breaker / Predictive)
# ============================================================================
EAN_MP_WEBHOOK_ASYNC=false
EAN_PREDICTIVE_TREND_HOURS=24
EAN_PREDICTIVE_MAX_DIVERGENCES=5
EAN_PREDICTIVE_MAX_AVG_SECONDS=10
EAN_PREDICTIVE_MAX_FAILURE_RATE_PERCENT=20
EAN_PREDICTIVE_RUNBOOK_ENABLED=false
EAN_CIRCUIT_BREAKER_THRESHOLD_CYCLES=3
EAN_CIRCUIT_BREAKER_OPEN_MINUTES=5

# ============================================================================
# Brevo Advanced
# ============================================================================
BREVO_BASE_URL=https://api.brevo.com/v3
BREVO_TIMEOUT_SECONDS=30
BREVO_CACHE_TTL_SECONDS=600

# ============================================================================
# Amazon Marketplace (opcional)
# ============================================================================
AMAZON_CLIENT_ID=
AMAZON_CLIENT_SECRET=
AMAZON_REFRESH_TOKEN=
AMAZON_SELLER_ID=
AMAZON_AWS_ACCESS_KEY=
AMAZON_AWS_SECRET_KEY=
AMAZON_AWS_REGION=us-east-1
AMAZON_MARKETPLACE_ID=

# ============================================================================
# Shopee Marketplace (opcional)
# ============================================================================
SHOPEE_PARTNER_ID=
SHOPEE_PARTNER_KEY=
SHOPEE_SHOP_ID=

# ============================================================================
# Google Services (opcional)
# ============================================================================
GOOGLE_ADS_API_KEY=
GOOGLE_ADS_CLIENT_ID=
GOOGLE_ADS_CLIENT_SECRET=
GOOGLE_ADS_DEVELOPER_TOKEN=
GOOGLE_ADS_REFRESH_TOKEN=
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_APPLICATION_CREDENTIALS=

# ============================================================================
# Token Cleanup
# ============================================================================
CLEANUP_REMOVE_ALERT_THRESHOLD=90
